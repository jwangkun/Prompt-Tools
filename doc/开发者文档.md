# Prompt Tools å¼€å‘è€…æ–‡æ¡£

## ğŸ“‹ ç›®å½•
1. [ç¯å¢ƒæ­å»º](#1-ç¯å¢ƒæ­å»º)
2. [é¡¹ç›®ç»“æ„](#2-é¡¹ç›®ç»“æ„)
3. [å¼€å‘æŒ‡å—](#3-å¼€å‘æŒ‡å—)
4. [ä»£ç è§„èŒƒ](#4-ä»£ç è§„èŒƒ)
5. [æµ‹è¯•å’Œæ„å»º](#5-æµ‹è¯•å’Œæ„å»º)
6. [è´¡çŒ®æŒ‡å—](#6-è´¡çŒ®æŒ‡å—)

## 1. ç¯å¢ƒæ­å»º

### 1.1 å‰ç½®è¦æ±‚
- **Node.js**: v18+ 
- **pnpm**: 8.0+
- **Rust**: 1.70+
- **Git**: æœ€æ–°ç‰ˆæœ¬

### 1.2 Tauri ç¯å¢ƒé…ç½®

**macOS**:
```bash
xcode-select --install
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

**Windows** (è®¡åˆ’æ”¯æŒ):
```bash
# å®‰è£… Visual Studio C++ Build Tools
# å®‰è£… WebView2 Runtime
```

### 1.3 é¡¹ç›®å®‰è£…
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/jwangkun/Prompt-Tools.git
cd Prompt-Tools

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
pnpm tauri:dev
```

### 1.4 IDE é…ç½®
æ¨èä½¿ç”¨ **VS Code** å¹¶å®‰è£…ä»¥ä¸‹æ‰©å±•ï¼š
- rust-lang.rust-analyzer
- tauri-apps.tauri-vscode
- ms-vscode.vscode-typescript-next

## 2. é¡¹ç›®ç»“æ„

```
Prompt-Tools/
â”œâ”€â”€ src/                    # å‰ç«¯æºä»£ç 
â”‚   â”œâ”€â”€ main.ts            # ä¸»åº”ç”¨é€»è¾‘
â”‚   â”œâ”€â”€ advanced.ts        # é«˜çº§åŠŸèƒ½æ¨¡å—
â”‚   â””â”€â”€ styles.css         # å…¨å±€æ ·å¼
â”œâ”€â”€ src-tauri/             # Tauri åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs        # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ lib.rs         # API å‘½ä»¤
â”‚   â”‚   â””â”€â”€ database.rs    # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ Cargo.toml         # Rust ä¾èµ–
â”‚   â””â”€â”€ tauri.conf.json    # Tauri é…ç½®
â”œâ”€â”€ doc/                   # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ package.json           # å‰ç«¯é…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScript é…ç½®
â””â”€â”€ vite.config.ts         # æ„å»ºé…ç½®
```

### 2.1 æ ¸å¿ƒæ¨¡å—
- **å‰ç«¯**: TypeScript + Vite + åŸç”ŸDOM
- **åç«¯**: Rust + Tauri + SQLite
- **UI**: CSS3 å˜é‡ + å“åº”å¼è®¾è®¡

## 3. å¼€å‘æŒ‡å—

### 3.1 å¯åŠ¨å¼€å‘
```bash
# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
pnpm tauri:dev

# ä»…å‰ç«¯å¼€å‘
pnpm dev

# ç±»å‹æ£€æŸ¥
pnpm typecheck
```

### 3.2 å‰ç«¯å¼€å‘

#### 3.2.1 æ·»åŠ æ–°åŠŸèƒ½
```typescript
// ç¤ºä¾‹ï¼šåˆ›å»ºæ–°ç»„ä»¶
function createNewComponent(data: ComponentData): HTMLElement {
  const element = document.createElement('div');
  element.className = 'new-component';
  element.innerHTML = `
    <h3>${data.title}</h3>
    <p>${data.content}</p>
  `;
  return element;
}

// è°ƒç”¨åç«¯ API
async function callBackendAPI() {
  try {
    const result = await invoke('api_command', { param: 'value' });
    console.log('æˆåŠŸ:', result);
  } catch (error) {
    console.error('å¤±è´¥:', error);
    showNotification('æ“ä½œå¤±è´¥', 'error');
  }
}
```

#### 3.2.2 çŠ¶æ€ç®¡ç†
```typescript
// å…¨å±€çŠ¶æ€
interface AppState {
  prompts: Prompt[];
  isLoading: boolean;
  currentTheme: 'light' | 'dark';
}

let appState: AppState = {
  prompts: [],
  isLoading: false,
  currentTheme: 'light'
};
```

### 3.3 åç«¯å¼€å‘

#### 3.3.1 æ·»åŠ æ–°APIå‘½ä»¤
```rust
// 1. åœ¨ lib.rs ä¸­å®šä¹‰å‘½ä»¤
#[tauri::command]
async fn new_api_command(
    app_handle: tauri::AppHandle,
    param: String
) -> Result<String, String> {
    let app_dir = app_handle.path().app_data_dir()
        .map_err(|e| format!("è·¯å¾„é”™è¯¯: {}", e))?;
    
    let db_path = app_dir.join("prompts.db");
    let db = Database::new(db_path)
        .map_err(|e| format!("æ•°æ®åº“é”™è¯¯: {}", e))?;
    
    // ä¸šåŠ¡é€»è¾‘
    let result = db.some_operation(&param)
        .map_err(|e| format!("æ“ä½œå¤±è´¥: {}", e))?;
    
    Ok(result)
}

// 2. æ³¨å†Œå‘½ä»¤
.invoke_handler(tauri::generate_handler![
    new_api_command,
    // å…¶ä»–å‘½ä»¤...
])
```

#### 3.3.2 æ•°æ®åº“æ“ä½œ
```rust
// åœ¨ database.rs ä¸­æ·»åŠ æ–¹æ³•
impl Database {
    pub fn some_operation(&self, param: &str) -> SqliteResult<String> {
        let mut stmt = self.conn.prepare(
            "SELECT column FROM table WHERE condition = ?1"
        )?;
        
        let result: String = stmt.query_row([param], |row| {
            Ok(row.get(0)?)
        })?;
        
        Ok(result)
    }
}
```

### 3.4 è°ƒè¯•æŠ€å·§

#### 3.4.1 å‰ç«¯è°ƒè¯•
```typescript
// å¼€å‘ç¯å¢ƒæ—¥å¿—
if (import.meta.env.DEV) {
  console.log('è°ƒè¯•:', data);
}

// åœ¨ Tauri åº”ç”¨ä¸­æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
```

#### 3.4.2 åç«¯è°ƒè¯•
```rust
// æ§åˆ¶å°è¾“å‡º
println!("è°ƒè¯•ä¿¡æ¯: {:?}", variable);
eprintln!("é”™è¯¯ä¿¡æ¯: {}", error);

// æ¡ä»¶ç¼–è¯‘
#[cfg(debug_assertions)]
println!("ä»…è°ƒè¯•æ¨¡å¼è¾“å‡º");
```

## 4. ä»£ç è§„èŒƒ

### 4.1 TypeScript è§„èŒƒ

#### 4.1.1 å‘½åçº¦å®š
```typescript
// å˜é‡å’Œå‡½æ•°ï¼šcamelCase
const userName = 'john';
function getUserData() {}

// å¸¸é‡ï¼šSCREAMING_SNAKE_CASE
const API_BASE_URL = 'http://localhost';

// ç±»å‹å’Œæ¥å£ï¼šPascalCase
interface UserData {
  id: number;
  name: string;
}
```

#### 4.1.2 ç±»å‹å®šä¹‰
```typescript
// ä¼˜å…ˆä½¿ç”¨ interface
interface Prompt {
  id: number;
  name: string;
  content: string;
  tags: string[];
}

// è”åˆç±»å‹
type Theme = 'light' | 'dark';
type Status = 'loading' | 'success' | 'error';
```

### 4.2 Rust è§„èŒƒ

#### 4.2.1 å‘½åçº¦å®š
```rust
// å˜é‡å’Œå‡½æ•°ï¼šsnake_case
let user_name = "john";
fn get_user_data() {}

// å¸¸é‡ï¼šSCREAMING_SNAKE_CASE
const API_BASE_URL: &str = "http://localhost";

// ç»“æ„ä½“ï¼šPascalCase
struct UserData {
    id: i64,
    name: String,
}
```

#### 4.2.2 é”™è¯¯å¤„ç†
```rust
// ä½¿ç”¨ Result ç±»å‹
pub fn create_item(data: ItemData) -> Result<i64, AppError> {
    validate_data(&data)?;
    let id = database.insert(data)?;
    Ok(id)
}

// è‡ªå®šä¹‰é”™è¯¯
#[derive(Debug, thiserror::Error)]
pub enum AppError {
    #[error("æ•°æ®åº“é”™è¯¯: {0}")]
    Database(#[from] rusqlite::Error),
    #[error("éªŒè¯é”™è¯¯: {message}")]
    Validation { message: String },
}
```

### 4.3 CSS è§„èŒƒ

#### 4.3.1 BEM å‘½å
```css
/* Block */
.prompt-card {}

/* Element */
.prompt-card__header {}
.prompt-card__content {}

/* Modifier */
.prompt-card--pinned {}
.prompt-card--selected {}
```

#### 4.3.2 CSS å˜é‡
```css
:root {
  /* é¢œè‰² */
  --primary-color: #3b82f6;
  --secondary-color: #6b7280;
  
  /* é—´è· */
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  
  /* å­—ä½“ */
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
}
```

### 4.4 Git æäº¤è§„èŒƒ

#### 4.4.1 æäº¤æ ¼å¼
```
<type>(<scope>): <description>

[optional body]
[optional footer]
```

**ç±»å‹**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤
- `docs`: æ–‡æ¡£
- `style`: æ ¼å¼
- `refactor`: é‡æ„
- `test`: æµ‹è¯•

**ç¤ºä¾‹**:
```
feat(ui): æ·»åŠ æ·±è‰²ä¸»é¢˜æ”¯æŒ

- å®ç°ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
- æ·»åŠ æ·±è‰²æ¨¡å¼æ ·å¼
- ä¿å­˜ç”¨æˆ·ä¸»é¢˜åå¥½

Closes #42
```

## 5. æµ‹è¯•å’Œæ„å»º

### 5.1 æµ‹è¯•

#### 5.1.1 å‰ç«¯æµ‹è¯•
```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pnpm add -D vitest jsdom @testing-library/dom

# è¿è¡Œæµ‹è¯•
pnpm test

# ç›‘è§†æ¨¡å¼
pnpm test --watch
```

#### 5.1.2 åç«¯æµ‹è¯•
```rust
// å•å…ƒæµ‹è¯•ç¤ºä¾‹
#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_create_prompt() {
        let db = Database::new(":memory:").unwrap();
        let req = CreatePromptRequest {
            name: "Test".to_string(),
            content: "Content".to_string(),
            tags: vec!["test".to_string()],
            source: None,
            notes: None,
        };
        
        let id = db.create_prompt(req).unwrap();
        assert!(id > 0);
    }
}
```

```bash
# è¿è¡Œ Rust æµ‹è¯•
cargo test

# æ˜¾ç¤ºè¾“å‡º
cargo test -- --nocapture
```

### 5.2 æ„å»º

#### 5.2.1 å¼€å‘æ„å»º
```bash
# å‰ç«¯æ„å»º
pnpm build

# ç±»å‹æ£€æŸ¥
pnpm typecheck

# Rust æ£€æŸ¥
cargo check
```

#### 5.2.2 ç”Ÿäº§æ„å»º
```bash
# å®Œæ•´æ„å»º
pnpm tauri:build

# æ„å»ºäº§ç‰©ä½ç½®ï¼š
# macOS: src-tauri/target/release/bundle/macos/
# Windows: src-tauri/target/release/bundle/msi/
# Linux: src-tauri/target/release/bundle/deb/
```

### 5.3 å‘å¸ƒæµç¨‹

#### 5.3.1 ç‰ˆæœ¬ç®¡ç†
```bash
# æ›´æ–°ç‰ˆæœ¬
pnpm version patch   # 0.1.0 -> 0.1.1
pnpm version minor   # 0.1.1 -> 0.2.0
pnpm version major   # 0.2.0 -> 1.0.0

# æ‰‹åŠ¨åŒæ­¥ src-tauri/Cargo.toml ç‰ˆæœ¬å·
```

#### 5.3.2 å‘å¸ƒæ­¥éª¤
1. æ›´æ–°ç‰ˆæœ¬å·
2. æ›´æ–° CHANGELOG.md
3. è¿è¡Œæ‰€æœ‰æµ‹è¯•
4. æ„å»ºåº”ç”¨
5. åˆ›å»º Git æ ‡ç­¾
6. å‘å¸ƒ GitHub Release

## 6. è´¡çŒ®æŒ‡å—

### 6.1 è´¡çŒ®æµç¨‹

#### 6.1.1 Fork å’Œå¼€å‘
```bash
# 1. Fork é¡¹ç›®
# 2. Clone ä½ çš„ fork
git clone https://github.com/YOUR_USERNAME/Prompt-Tools.git

# 3. æ·»åŠ ä¸Šæ¸¸ä»“åº“
git remote add upstream https://github.com/jwangkun/Prompt-Tools.git

# 4. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature

# 5. å¼€å‘å’Œæäº¤
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 6. æ¨é€å’Œåˆ›å»º PR
git push origin feature/your-feature
```

### 6.2 è´¡çŒ®è¦æ±‚

#### 6.2.1 ä»£ç è´¨é‡
- [ ] éµå¾ªä»£ç è§„èŒƒ
- [ ] æ·»åŠ å¿…è¦æµ‹è¯•
- [ ] é€šè¿‡æ‰€æœ‰æµ‹è¯•
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£

#### 6.2.2 PR è¦æ±‚
- [ ] æ¸…æ™°çš„ PR æè¿°
- [ ] å…³è”ç›¸å…³ Issue
- [ ] åŒ…å«æµ‹è¯•æˆªå›¾ï¼ˆUI æ”¹åŠ¨ï¼‰
- [ ] å“åº”ä»£ç å®¡æŸ¥

### 6.3 ç¤¾åŒºè§„èŒƒ
- å°Šé‡æ‰€æœ‰è´¡çŒ®è€…
- ä¿æŒå»ºè®¾æ€§è®¨è®º
- æ¬¢è¿æ–°æ‰‹å‚ä¸
- åŠæ—¶å›åº”é—®é¢˜

### 6.4 é—®é¢˜æŠ¥å‘Š
ä½¿ç”¨ GitHub Issues æŠ¥å‘Šï¼š
- **Bug**: é—®é¢˜æè¿°ã€å¤ç°æ­¥éª¤ã€æœŸæœ›è¡Œä¸º
- **åŠŸèƒ½è¯·æ±‚**: éœ€æ±‚æè¿°ã€ä½¿ç”¨åœºæ™¯ã€å®ç°å»ºè®®
- **é—®é¢˜è®¨è®º**: æŠ€æœ¯è®¨è®ºã€è®¾è®¡å†³ç­–

## 7. å¸¸è§é—®é¢˜

### 7.1 å¼€å‘é—®é¢˜

#### Q: Tauri å¼€å‘æ¨¡å¼å¯åŠ¨å¤±è´¥ï¼Ÿ
```bash
# è§£å†³æ–¹æ¡ˆ
rustup update stable
cargo clean && pnpm clean
pnpm install
```

#### Q: TypeScript ç±»å‹é”™è¯¯ï¼Ÿ
```bash
# è§£å†³æ–¹æ¡ˆ
pnpm typecheck
rm -rf node_modules dist
pnpm install
```

### 7.2 æ„å»ºé—®é¢˜

#### Q: æ„å»ºå¤±è´¥ï¼Ÿ
```bash
# æ£€æŸ¥è¯¦ç»†æ—¥å¿—
pnpm tauri:build --verbose

# æ¸…ç†é‡å»º
cargo clean
rm -rf dist
pnpm install && pnpm tauri:build
```

### 7.3 æ€§èƒ½è°ƒä¼˜

#### 7.3.1 å‰ç«¯ä¼˜åŒ–
- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·åˆ†ææ€§èƒ½
- æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µ
- ä¼˜åŒ–å¤§åˆ—è¡¨æ¸²æŸ“ï¼ˆè™šæ‹Ÿæ»šåŠ¨ï¼‰

#### 7.3.2 åç«¯ä¼˜åŒ–
- ä½¿ç”¨ `cargo flamegraph` åˆ†ææ€§èƒ½
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
- å‡å°‘ä¸å¿…è¦çš„å†…å­˜åˆ†é…

---

## ğŸ“ è·å–å¸®åŠ©

- **GitHub Issues**: [æŠ¥å‘Šé—®é¢˜æˆ–å»ºè®®](https://github.com/jwangkun/Prompt-Tools/issues)
- **æ–‡æ¡£**: æŸ¥çœ‹é¡¹ç›® README å’Œæ–‡æ¡£
- **ç¤¾åŒº**: å‚ä¸ GitHub Discussions

æ„Ÿè°¢æ‚¨å¯¹ Prompt Tools çš„è´¡çŒ®ï¼